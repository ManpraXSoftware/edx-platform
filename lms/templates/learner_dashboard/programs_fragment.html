## mako

<%page expression_filter="h"/>

<%namespace name='static' file='../static_content.html'/>
<%!
from openedx.core.djangolib.js_utils import (
    dump_js_escaped_json, js_escaped_string
)
from django.utils.translation import ugettext as _

##self.real_user = getattr(request.user, 'real_user', request.user)
%>
<div class="sub_box" style="padding: 10px 0 !important;" focusable="true" tabindex="0">

    <h1>${_("My Dashboard")}</h1>
</div>
<div class="program-list-wrapper grid-container" style="padding: 5px !important;">
    
    %if 'program_title' in resume_block:
    <div class="card-outer">
        <h4 class="card-outertext" tabindex="0">Recently Accessed Course</h4>
         <div class="card-box">
           <p style="display: inline; color: #5e5e5e;" class="program-topics">
            %if 'topics' in resume_block:
                %for topic in resume_block['topics']:
                    <span>${topic}</span>
                %endfor
            %endif
            </p>
           <h5 class="cardbox-title">
                <span>PROGRAM NAME - </span>
                <span>${resume_block['program_title']}</span>
               
            </h5>
           <h3 class="card-text py-3">${resume_block['course_title']}</h3>
   
           <div style="text-align:right" class="vcourse"><a href="${resume_block['resume_block_url']}" aria-label="${resume_block['course_title']} continue course" class="btn-border" btn-type="resume">Continue</a></div>
         </div>
       </div>
       %endif
    
    %if programs :
        <h4 class="program-heading">Your Enrolled Programs</h4>
    %endif
    
    <!-- <div class="program-cards-container col"></div> -->
    <div class="program-cards-container"></div>
    <!-- <div class="sidebar col col-last"></div> -->
</div>
<script>
    window.addEventListener('load', function () {
        var elements = document.getElementsByClassName('btn-border');
        for (var i = 0; i < elements.length; i++) {
            if(! elements[0].hasAttribute("btn-type")){
                elements[i].setAttribute("aria-label",$("#program-"+elements[i].href.split("/")[4]).html()+" view program")
            }
            
        }
        });
    
</script>
<%block name="js_extra">
<%static:webpack entry="ProgramListFactory">
ProgramListFactory({
    marketingUrl: '${marketing_url | n, js_escaped_string}',
    programsData: ${programs | n, dump_js_escaped_json},
    userProgress: ${progress | n, dump_js_escaped_json}
});
</%static:webpack>
</%block>
